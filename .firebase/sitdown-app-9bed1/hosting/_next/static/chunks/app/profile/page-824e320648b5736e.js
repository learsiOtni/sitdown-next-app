(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{8323:function(e,t,s){Promise.resolve().then(s.bind(s,1337))},1337:function(e,t,s){"use strict";s.r(t);var a=s(7437),r=s(2265),n=s(4033),d=s(7713),c=s(8862),i=s(2731),l=s(3043),o=s(8957),u=s(1195),p=s(2507);t.default=()=>{let[e,t]=(0,r.useState)(),s=(0,r.useRef)(null),f=(0,n.useRouter)(),h=(0,d.getCookie)("authToken"),x=(0,c.TL)(),m=(0,c.CG)(e=>e.auth.credentials.user),g=(0,c.CG)(e=>e.updates.updates),b=async()=>{if(e){let s=new FormData;e&&s.append("image",e,null==e?void 0:e.name);let a=await fetch("".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","profile/upload"),{method:"POST",body:s,headers:{Authorization:"Bearer ".concat(h)}}),r=await a.json(),n=[];g.forEach(e=>{e.user.id===m.id?n.push({...e,user:{...e.user,image:r.image}}):n.push(e)}),x((0,l.Vx)(n)),x((0,i.W$)(r.image)),t(void 0),f.refresh()}else s.current&&s.current.click()},{firstname:w,lastname:j,image:y,email:N}=m;return(0,a.jsx)("div",{className:"w-full p-11 h-screen",children:(0,a.jsxs)(u.Z,{className:"p-10",children:[(0,a.jsx)("h1",{className:"text-heading",children:"Settings"}),(0,a.jsxs)("div",{className:"mt-7 flex",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Z,{className:"w-[210px] text-xl",icon:"user",iconStyle:"w-4 h-4",children:"Profile"}),(0,a.jsx)(o.Z,{className:"text-xl",bgNone:!0,icon:"settings",iconStyle:"w-5 h-5 text-[#B6B6B6]",children:"Account Settings"})]}),(0,a.jsxs)("div",{className:"ml-[108px] w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex-col w-[414px]",children:[(0,a.jsx)("p",{className:"text-caption",children:"First Name"}),(0,a.jsx)("input",{type:"text",name:"name",value:w,readOnly:!0,className:"border border-[#B4B8BC80] p-3 rounded-md text-sm w-full mt-1.5"}),(0,a.jsx)("p",{className:"text-caption mt-5",children:"Last Name"}),(0,a.jsx)("input",{type:"text",name:"surname",value:j,readOnly:!0,className:"border border-[#B4B8BC80] p-3 rounded-md text-sm w-full mt-1.5"})]}),(0,a.jsxs)("div",{className:"flex-col-center",children:[(0,a.jsx)("p",{className:"text-body",children:"Your Avatar"}),(0,a.jsx)("div",{className:"w-[71px] h-[71px] min-w[71px] mt-3 relative",children:(0,a.jsx)(p.Z,{image:y})}),(0,a.jsx)("input",{type:"file",onChange:e=>{e.target.files&&t(e.target.files[0])},className:"hidden",ref:s}),(0,a.jsx)(o.Z,{className:"mt-5 w-[93px] text-[13px]",onClick:b,children:e?"Save":"Update"})]})]}),(0,a.jsx)("div",{className:"my-10 border-b-2 border-b-[#E6E7E8] w-full h-min"}),(0,a.jsx)("h6",{className:"text-body",children:"Email address"}),(0,a.jsxs)("div",{className:"mt-5 flex-between",children:[(0,a.jsxs)("p",{className:"text-caption",children:["Your email address is ",N]}),(0,a.jsx)("p",{className:"text-caption-primary underline",children:"Change"})]}),(0,a.jsx)("div",{className:"my-10 border-b-2 border-b-[#E6E7E8] w-full h-min"}),(0,a.jsxs)("div",{className:"mt-5 flex-between",children:[(0,a.jsx)("h6",{className:"text-body",children:"Password"}),(0,a.jsx)("p",{className:"text-caption-primary underline",children:"Change"})]}),(0,a.jsx)(o.Z,{className:"w-[160px] float-right mt-[70px] text-xl",children:"Save Changes"})]})]})]},1)})}},8957:function(e,t,s){"use strict";var a=s(7437),r=s(8875),n=s(1962);t.Z=e=>{let t,{className:s,type:d,icon:c,iconStyle:i,bgNone:l,dropdown:o,children:u,onClick:p}=e,f="",h="whitespace-nowrap rounded py-2 text-white bg-primary shadow-md hover:opacity-70",x="whitespace-nowrap py-3 px-5 hover:bg-slate-100 ";return s?(f="".concat(h," ").concat(s),l&&(f="".concat(x," ").concat(s))):l&&(f=x),c&&(f="".concat(f," flex px-5")),o&&(t=(0,a.jsx)("span",{className:"inline-block ml-2 ",children:(0,a.jsx)(n.Z,{direction:"down",color:"border-b-[#FFFFFF]",size:"sm"})})),(0,a.jsxs)("button",{className:f||h,onClick:p,type:d,children:[c?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(r.Z,{name:c,iconContainerStyle:i}),(0,a.jsx)("div",{className:"ml-2.5",children:u})]}):(0,a.jsx)(a.Fragment,{children:u}),t]})}},1195:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{className:t,children:s}=e,r="border-[#E2E5E6] bg-white rounded shadow-md ";return t&&(r+=t),(0,a.jsx)("div",{className:r,children:s})}},8875:function(e,t,s){"use strict";var a=s(7437),r=s(2759),n=s(7188),d=s(504);t.Z=e=>{let{name:t,iconContainerStyle:s,background:c,size:i,onClick:l}=e,o=n.kZ_,u="flex items-center justify-center ".concat(s),p="";return"updates"===t&&(p="-scale-y-100 rotate-45"),"projects"===t&&(p="-scale-y-100"),"dashboard"===t&&(o=r.g4A)&&c&&(u+=" bg-yellow"),"updates"===t&&(o=r.T80)&&c&&(u+=" bg-yellow"),"tags"===t&&(o=r.LEN)&&c&&(u+=" bg-purple"),"users"===t&&(o=r.r$M)&&c&&(u+=" bg-red"),"projects"===t&&(o=n.kZ_)&&c&&(u+=" bg-blue"),"add"===t&&(o=r.KtF)&&c&&(p+=" text-brand"),"edit"===t&&(o=r.IwR)&&(u+=" border-b-4"),"search"===t&&(o=r.wn1),"notification"===t&&(o=r.qmU),"delete"===t&&(o=r.$aW),"user"===t&&(o=r.ILF),"settings"===t&&(o=r.gr5),"close"===t&&(o=r.NBC),"list"===t&&(o=r.Zrf),"orList"===t&&(o=r.nFo),"check"===t&&(o=r.LEp),(0,a.jsx)("div",{className:u,children:(0,a.jsx)(d.G,{icon:o,className:p,size:i,onClick:l})})}},1962:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let t,{direction:s,color:r,size:n}=e,d="w-0 h-0 \n        border-l-[7.5px] border-l-transparent\n        border-t-[10px] ".concat(r,"\n        border-r-[7.5px] border-r-transparent"),c="w-0 h-0\n        border-l-[7.5px] border-l-transparent\n        border-b-[10px] ".concat(r,"\n        border-r-[7.5px] border-r-transparent");return"sm"===n&&(d="w-0 h-0 \n            border-l-[5px] border-l-transparent\n            border-t-[7.5px] ".concat(r,"\n            border-r-[5px] border-r-transparent"),c="w-0 h-0\n            border-l-[5px] border-l-transparent\n            border-b-[7.5px] ".concat(r,"\n            border-r-[5px] border-r-transparent")),"up"===s&&(t=c),"down"===s&&(t=d),(0,a.jsx)("div",{className:t})}},2507:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(7437),r=s(6691),n=s.n(r);function d(e){let{image:t}=e;return(0,a.jsx)(a.Fragment,{children:t?(0,a.jsx)("img",{src:t,alt:"user profile",className:"rounded-full object-cover w-full h-full m-w-full"}):(0,a.jsx)(n(),{src:"/noavatar.png",fill:!0,alt:"user profile image",className:"rounded-full"})})}},2731:function(e,t,s){"use strict";s.d(t,{W$:function(){return h},b9:function(){return p},kS:function(){return f},nX:function(){return i},x4:function(){return c}});var a=s(4302),r=s(7713),n=s(4332);let d={isAuth:!1,credentials:{token:"",user:{id:"",email:"",firstname:"",lastname:"",createdAt:"",image:""}},status:"idle",errors:{}},c=(0,a.hg)("/login",async(e,t)=>{let{userData:s,isSignup:a}=e,{rejectWithValue:d}=t,c="".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","login");a&&(c="".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","signup"));let i=await n.h.post(c,s);return i.token?((0,r.setCookie)("authToken",i.token,{expires:new Date(Date.now()+36e5)}),i):d(i)}),i=(0,a.hg)("/getAuthUser",async(e,t)=>{let{rejectWithValue:s}=t,a=await n.h.get("".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","user"),void 0,e);return a.error?s(a.error):a}),l=(0,a.oM)({name:"auth",initialState:d,reducers:{setAuth:e=>{e.isAuth=!0},setProfileImage:(e,t)=>{e.credentials.user.image=t.payload},setCredentials:(e,t)=>{e.credentials.user=t.payload,e.isAuth=!0},clearErrors:e=>{e.errors={}},logout:e=>((0,r.deleteCookie)("authToken"),d)},extraReducers(e){e.addCase(c.pending,(e,t)=>{e.errors={},e.status="loading"}).addCase(c.fulfilled,(e,t)=>{e.status="succeeded",e.isAuth=!0,e.credentials.token=t.payload.token}).addCase(c.rejected,(e,t)=>{e.status="failed",e.errors=t.payload}).addCase(i.pending,(e,t)=>{e.errors={},e.status="loading"}).addCase(i.fulfilled,(e,t)=>{e.status="succeeded",e.credentials.user=t.payload,e.isAuth=!0}).addCase(i.rejected,(e,t)=>{e.status="failed",e.errors=t.error.message})}}),{setAuth:o,setCredentials:u,clearErrors:p,logout:f,setProfileImage:h}=l.actions;t.ZP=l.reducer},3043:function(e,t,s){"use strict";s.d(t,{$J:function(){return p},ER:function(){return d},Tf:function(){return o},Vx:function(){return f},b9:function(){return u},dw:function(){return c},ec:function(){return i},f9:function(){return n}});var a=s(4332),r=s(4302);let n=(0,r.hg)("/updates/fetchUpdates",async(e,t)=>{let{rejectWithValue:s}=t,r=await a.h.get("".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","updates"));return r.error?s(r):r}),d=(0,r.hg)("/updates/postUpdate",async(e,t)=>{let{body:s,token:r,userInfo:n}=e,{rejectWithValue:d}=t,c=await a.h.post("".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","updates"),s,r);if(!c.id)return d(c);let{userId:i,...l}=c;return{...l,user:n}}),c=(0,r.hg)("/updates/editUpdate",async(e,t)=>{let{body:s,token:r,userInfo:n,id:d}=e,{rejectWithValue:c}=t,i=await a.h.post("".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","updates/").concat(d),s,r);if(!i.id)return c(i);let{userId:l,...o}=i;return{...o,user:n}}),i=(0,r.hg)("/updates/deleteUpdate",async(e,t)=>{let{id:s,token:r}=e,{rejectWithValue:n}=t,d=await a.h.delete("".concat("https://us-central1-sitdown-834fc.cloudfunctions.net/api/","updates/").concat(s),null,r);return d.error?n(d):{id:s,message:d}}),l=(0,r.oM)({name:"updates",initialState:{updates:[],status:"idle",errors:{},isModalOpen:!1,updateId:""},reducers:{setStatus:(e,t)=>{e.status=t.payload},clearErrors:e=>{e.errors={}},toggleModal:e=>{e.isModalOpen=!e.isModalOpen},setUpdates:(e,t)=>{e.updates=t.payload}},extraReducers(e){e.addCase(n.pending,(e,t)=>{e.status="loading",e.errors={}}).addCase(n.fulfilled,(e,t)=>{e.status="fetchSucceeded",e.updates=e.updates.concat(t.payload)}).addCase(n.rejected,(e,t)=>{e.status="failed",e.errors=t.error.message}).addCase(d.pending,(e,t)=>{e.status="loading",e.errors={}}).addCase(d.fulfilled,(e,t)=>{e.status="postSucceeded",e.updates.unshift(t.payload),e.errors={}}).addCase(d.rejected,(e,t)=>{e.status="failed",e.errors=t.payload}).addCase(c.pending,(e,t)=>{e.status="loading",e.errors={}}).addCase(c.fulfilled,(e,t)=>{let s=e.updates.findIndex(e=>e.id===t.payload.id);e.status="editSucceeded",e.updates[s]=t.payload,e.errors={}}).addCase(c.rejected,(e,t)=>{e.status="failed",e.errors=t.payload}).addCase(i.pending,(e,t)=>{e.status="loading",e.errors={}}).addCase(i.fulfilled,(e,t)=>{let s=e.updates.findIndex(e=>e.id===t.payload.id);e.updates.splice(s,1),e.status="deleteSucceeded",e.errors={}}).addCase(i.rejected,(e,t)=>{e.status="failed",e.errors=t.payload})}}),{setStatus:o,clearErrors:u,toggleModal:p,setUpdates:f}=l.actions;t.ZP=l.reducer},8862:function(e,t,s){"use strict";s.d(t,{CG:function(){return n},TL:function(){return r}});var a=s(1023);let r=a.I0,n=a.v9},4332:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});let a=e=>async(t,s,a)=>{let r={method:e};s&&(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(s)),a&&(r.headers={...r.headers,Authorization:"Bearer ".concat(a)});let n=await fetch(t,r);return await n.json()},r={get:a("GET"),post:a("POST"),put:a("PUT"),delete:a("DELETE")}}},function(e){e.O(0,[676,222,336,971,596,744],function(){return e(e.s=8323)}),_N_E=e.O()}]);